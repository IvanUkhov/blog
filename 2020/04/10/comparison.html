<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>What is the easiest way to compare two data sets? | Good news, everyone!</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="What is the easiest way to compare two data sets?" />
<meta name="author" content="Ivan Ukhov" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="One has probably come across this problem numerous times. There are two versions of a tabular data set with a lot of columns of different types, and one wants to quickly identify any differences between the two. For example, the pipeline providing data to a predictive model might have been updated, and the goal is to understand if there have been any side effects of this update for the training data." />
<meta property="og:description" content="One has probably come across this problem numerous times. There are two versions of a tabular data set with a lot of columns of different types, and one wants to quickly identify any differences between the two. For example, the pipeline providing data to a predictive model might have been updated, and the goal is to understand if there have been any side effects of this update for the training data." />
<link rel="canonical" href="https://blog.ivanukhov.com/2020/04/10/comparison.html" />
<meta property="og:url" content="https://blog.ivanukhov.com/2020/04/10/comparison.html" />
<meta property="og:site_name" content="Good news, everyone!" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-04-10T06:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="What is the easiest way to compare two data sets?" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Ivan Ukhov"},"dateModified":"2020-04-10T06:00:00+00:00","datePublished":"2020-04-10T06:00:00+00:00","description":"One has probably come across this problem numerous times. There are two versions of a tabular data set with a lot of columns of different types, and one wants to quickly identify any differences between the two. For example, the pipeline providing data to a predictive model might have been updated, and the goal is to understand if there have been any side effects of this update for the training data.","headline":"What is the easiest way to compare two data sets?","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.ivanukhov.com/2020/04/10/comparison.html"},"url":"https://blog.ivanukhov.com/2020/04/10/comparison.html"}</script>
<!-- End Jekyll SEO tag -->
<link id="main-stylesheet" rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://blog.ivanukhov.com/feed.xml" title="Good news, everyone!" /><script async src="https://www.googletagmanager.com/gtag/js?id=G-43DGEP382H"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){window.dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-43DGEP382H');
</script>
<meta content="assets/favicon.png" property="og:image"><meta name="keywords" content="Python, TensorFlow, data science, exploratory data analysis"><link rel="stylesheet" href="/assets/main.css">
<link rel="shortcut icon" type="image/png" href="/assets/favicon.png"><script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/1.3.3/webcomponents-lite.js'></script>

</head>
<body><header class="site-header">

  <div class="wrapper">
    <a class="site-title" rel="author" href="/">Good news, everyone!</a>
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon"></span>
        </label>

        <div class="nav-items">
  <a class="nav-item" href="/about/">About</a>
</div>

      </nav>
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">What is the easiest way to compare two data sets?</h1>
    <div class="post-meta">
      <time class="dt-published" datetime="2020-04-10T06:00:00+00:00" itemprop="datePublished">
        April 10, 2020
      </time>
    </div>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>One has probably come across this problem numerous times. There are two versions
of a tabular data set with a lot of columns of different types, and one wants to
quickly identify any differences between the two. For example, the pipeline
providing data to a predictive model might have been updated, and the goal is to
understand if there have been any side effects of this update for the training
data.</p>

<p>One solution is to start to iterate over the columns of the two tables,
computing five-number summaries and plotting histograms or identifying distinct
values and plotting bar charts, depending on the column’s type. However, this
can quickly get out of hand and evolve into an endeavor for the rest of the day.</p>

<p>An alternative is to leverage the amazing tools that already exist in the data
community.</p>

<h1 id="solution">Solution</h1>

<p>The key takeaway is the following three lines of code, excluding the import:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">tensorflow_data_validation</span> <span class="k">as</span> <span class="n">dv</span>

<span class="n">statistics_1</span> <span class="o">=</span> <span class="n">dv</span><span class="p">.</span><span class="nf">generate_statistics_from_dataframe</span><span class="p">(</span><span class="n">data_1</span><span class="p">)</span>
<span class="n">statistics_2</span> <span class="o">=</span> <span class="n">dv</span><span class="p">.</span><span class="nf">generate_statistics_from_dataframe</span><span class="p">(</span><span class="n">data_2</span><span class="p">)</span>
<span class="n">dv</span><span class="p">.</span><span class="nf">visualize_statistics</span><span class="p">(</span><span class="n">lhs_statistics</span><span class="o">=</span><span class="n">statistics_1</span><span class="p">,</span>
                        <span class="n">rhs_statistics</span><span class="o">=</span><span class="n">statistics_2</span><span class="p">)</span>
</code></pre></div></div>

<p>This is all it takes to get a versatile dashboard embedded right into a cell of
a Jupyter notebook. The visualization itself is based on <a href="https://pair-code.github.io/facets">Facets</a>, and it is
conveniently provided by <a href="https://www.tensorflow.org/tfx/data_validation/get_started">TensorFlow Data Validation</a> (which does not have much
to do with TensorFlow and can be used stand-alone).</p>

<p>It is pointless to try to describe in words what the dashboard can do; instead,
here is a demonstration taken from <a href="https://pair-code.github.io/facets">Facets</a> where the tool is applied the <a href="http://archive.ics.uci.edu/ml/datasets/Census+Income">UCI
Census Income</a> data set:</p>

<div id="facets-overview-container"></div>

<p>Go ahead and give a try to all the different controls!</p>

<p>In this case, it is helpful to toggle the “percentages” checkbox, since the data
sets are of different sizes. Then it becomes apparent that the two partitions
are fairly balanced. The only problem is that <code class="language-plaintext highlighter-rouge">Target</code>, which represents income,
happened to be encoded incorrectly in the partition for testing.</p>

<p>Lastly, an example in a Jupyter notebook can be found on <a href="https://github.com/chain-rule/example-comparison/blob/master/census.ipynb">GitHub</a>.</p>

<h1 id="conclusion">Conclusion</h1>

<p>It can be difficult to navigate and particularly challenging to compare wide
data sets. A lot of effort can be put into this exercise. However, the landscape
of open-source tools has a lot to offer too. Facets is one such example. The
library and its straightforward availability via TensorFlow Data Validation are
arguably less known. This short note can hopefully rectify this to some extent.</p>


  </div>

  <script>
    var disqus_config = function () {
      this.page.url = 'https://blog.ivanukhov.com/2020/04/10/comparison.html';
      this.page.identifier = '/2020/04/10/comparison';
    };
    (function() {
      var d = document, s = d.createElement('script');
      s.src = 'https://good-news-everyone.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>
    Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
  </noscript>
<a class="u-url" href="/2020/04/10/comparison.html" hidden></a>
</article>

      </div>
    </main><link id="fa-stylesheet" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css">

<footer class="site-footer h-card">
  <data class="u-url" value="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <ul class="contact-list">
          <li class="p-name">Ivan Ukhov</li>
          <li><a class="u-email" href="mailto:ivan.ukhov@gmail.com">ivan.ukhov@gmail.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>Solving problems that a software engineer might encounter in practice—or invent to sharpen their skills in leisure time
</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li>
    <a rel="me" href="https://github.com/IvanUkhov" target="_blank" title="GitHub">
      <span class="grey fa-brands fa-github fa-lg"></span>
    </a>
  </li><li>
    <a rel="me" href="https://www.linkedin.com/in/ivanukhov/" target="_blank" title="LinkedIn">
      <span class="grey fa-brands fa-linkedin fa-lg"></span>
    </a>
  </li><li>
    <a rel="me" href="https://x.com/IvanUkhov" target="_blank" title="X">
      <span class="grey fa-brands fa-x-twitter fa-lg"></span>
    </a>
  </li>
  <li>
    <a href="https://blog.ivanukhov.com/feed.xml" target="_blank" title="Subscribe to syndication feed">
      <svg class="svg-icon grey" viewbox="0 0 16 16">
        <path d="M12.8 16C12.8 8.978 7.022 3.2 0 3.2V0c8.777 0 16 7.223 16 16h-3.2zM2.194
          11.61c1.21 0 2.195.985 2.195 2.196 0 1.21-.99 2.194-2.2 2.194C.98 16 0 15.017 0
          13.806c0-1.21.983-2.195 2.194-2.195zM10.606
          16h-3.11c0-4.113-3.383-7.497-7.496-7.497v-3.11c5.818 0 10.606 4.79 10.606 10.607z"
        />
      </svg>
    </a>
  </li>
</ul>
</div>

  </div>

</footer>
<script type="text/javascript">
  function anchor() {
    for (let header of document.querySelectorAll('h1[id], h2[id]')) {
      header.innerHTML += ` <a href="#${header.id}" aria-hidden="true">#</a>`;
    }
  }
  function theme() {
    document.body.className = 'theme-' + (Math.floor(Math.random() * 6) + 1);
  }
  window.addEventListener('load', anchor);
  window.addEventListener('load', theme);
</script><script type='text/javascript'>
  var path = '/assets/scripts/2020-04-10-comparison';
  var complete = false;
  window.addEventListener('WebComponentsReady', function() {
    if (complete) {
      return;
    }
    complete = true;
    var link = document.createElement('link');
    link.rel = 'import';
    link.href = path + '/facets.html';
    link.onload = function() {
      var overview = document.createElement('facets-overview');
      document.getElementById('facets-overview-container').appendChild(overview);
      var training = $.getJSON({ url: path + '/training.json' });
      var testing = $.getJSON({ url: path + '/testing.json' });
      $.when(training, testing).done(function(training, testing) {
        var proto = overview.getStatsProto([
          { data: training[0], name: 'training' },
          { data: testing[0], name: 'testing' }
        ]);
        overview.protoInput = proto;
        overview.data = testing[0];
      });
    };
    document.head.appendChild(link);
  });
</script> <style>
  #facets-overview-container {
    margin-top: 5em;
    margin-bottom: 5em;
  }

  @media screen and (min-width: 800px) {
    #facets-overview-container {
      width: 130%;
      margin-left: -15%;
    }
  }
</style>

</body>

</html>
